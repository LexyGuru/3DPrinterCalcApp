# 🖨️ 3D Printer Calculator App

> **🌍 语言选择**
> 
> [🇬🇧 English](README.en.md) | [🇭🇺 Magyar](README.hu.md) | [🇩🇪 Deutsch](README.de.md) | [🇪🇸 Español](README.es.md) | [🇮🇹 Italiano](README.it.md) | [🇵🇱 Polski](README.pl.md) | [🇨🇿 Čeština](README.cs.md) | [🇸🇰 Slovenčina](README.sk.md) | [🇵🇹 Português](README.pt.md) | [🇫🇷 Français](README.fr.md) | [🇨🇳 中文](README.zh.md) | [🇺🇦 Українська](README.uk.md) | [🇷🇺 Русский](README.ru.md)

一个用于计算3D打印成本的现代桌面应用程序。使用 Tauri v2、React 前端和 Rust 后端构建。

## ✨ 功能

- 📊 **成本计算** - 自动计算耗材、电力、干燥和磨损成本
- 🧵 **耗材管理** - 添加、编辑、删除耗材（品牌、类型、颜色、价格）
- 🖨️ **打印机管理** - 管理打印机和 AMS 系统
- 💰 **利润计算** - 可选择的利润百分比（10%、20%、30%、40%、50%）
- 📄 **报价** - 保存、管理和导出 PDF 报价（客户名称、联系方式、描述）
- 🧠 **过滤器预设** - 保存报价过滤器，应用快速预设，基于日期/时间的自动过滤器
- 🗂️ **状态仪表板** - 状态卡片、快速过滤器和最近状态更改的时间线
- 📝 **状态备注** - 每次状态更改都带有可选备注和历史记录
- 👁️ **PDF 预览和模板** - 内置 PDF 预览、可选模板和企业品牌块
- 🎨 **耗材颜色库** - 超过 12,000 种工厂颜色，具有基于品牌和类型的可选面板
- 💾 **耗材库编辑器** - 基于模态的添加/编辑、重复警告和持久保存到 `filamentLibrary.json`
- 🖼️ **PDF 中的耗材图像** - 在生成的 PDF 中显示耗材徽标和颜色样本
- 🧾 **G-code 导入和草稿创建** - 从计算器中的模态加载 G-code/JSON 导出（Prusa、Cura、Orca、Qidi），包含详细摘要和自动报价草稿生成
- 📈 **统计** - 耗材消耗、收入、利润的摘要仪表板
- 👥 **客户数据库** - 管理客户，包含联系信息、公司详情和报价统计
- 📊 **价格历史和趋势** - 使用图表和统计数据跟踪耗材价格变化
- 🌍 **多语言** - 完整翻译为匈牙利语、英语、德语、法语、简体中文、捷克语、西班牙语、意大利语、波兰语、葡萄牙语、斯洛伐克语、乌克兰语和俄语（14 种语言，每种语言 850+ 个翻译键）
- 💱 **多种货币** - EUR、HUF、USD、GBP、PLN、CZK、CNY、UAH、RUB（9种货币）
- 🔄 **自动更新** - 检查 GitHub Releases 以获取新版本
- 🧪 **Beta 版本** - Beta 分支和 Beta 构建支持
- ⚙️ **Beta 检查** - 可配置的 Beta 版本检查
- 🎨 **响应式布局** - 所有应用程序元素动态适应窗口大小
- ✅ **确认对话框** - 删除前请求确认
- 🔔 **Toast 通知** - 成功操作后的通知
- 🔍 **搜索和过滤** - 搜索耗材、打印机和报价
- 🔎 **在线价格比较** - 一键打开所选耗材的 Google/Bing 搜索结果，价格可立即更新
- 📋 **复制** - 轻松复制报价
- 🖱️ **拖放** - 通过拖拽重新排序报价、耗材和打印机
- 📱 **上下文菜单** - 右键菜单用于快速操作（编辑、删除、复制、导出）
- 🍎 **平台特定功能** - macOS Dock 徽章、Windows 任务栏进度条、原生通知、系统托盘集成

## 📋 更新日志 (Changelog)

### v1.6.0 (2025) - 📊 交互式小部件与大型表格性能

- 🧠 **交互式图表与详情模态框**
  - 所有主仪表盘图表现在使用统一的 `InteractiveChart` 组件，带有可点击的数据点和动画详情模态框。
  - 工具提示和模态框显示本地化的、人类可读的标签，用于收入、成本、利润和报价数量。
  - 趋势图表支持直接从画笔进行周期筛选（每周 / 每月 / 每年的切片发送到仪表盘）。

- 🧵 **大型列表的虚拟滚动**
  - 报价列表和耗材表格的自定义虚拟滚动 – 仅渲染可见行，即使在 10k+ 项目时也保持流畅滚动。
  - 设置 → 耗材库使用相同的虚拟滚动模式，因此完整的 12,000+ 颜色条目保持响应式。
  - 滚动条的位置和高度保持准确，这要归功于可见窗口上方和下方的间距元素。

- 📋 **高级表格排序与筛选**
  - 耗材和报价的多列排序（单击进行升序/降序，Shift+单击构建排序链，如"品牌 ↑，然后 价格/kg ↓"）。
  - 排序配置保存在设置中，因此首选的顺序在下次启动时恢复。
  - 耗材：按列的筛选器（品牌、材料/类型和颜色/HEX）。
  - 报价：总金额的数值范围筛选器（最小/最大）和日期范围筛选器（从/到）。

### v1.5.0 (2025) - 🧠 智能仪表盘与截止日期提醒

- ⏱️ **打印截止日期提醒** – 为已接受的报价新增提醒系统：
  - “计划任务”小部件会自动接收具有临近打印截止日期的报价任务
  - 顶部标题区域轮流显示“今天 / 明天 / 后天”样式的提醒，用于即将开始的打印作业
  - 持久的信息提示（toast）会在截止日期临近时持续提醒，直到用户手动关闭
- 🧵 **耗材库存管理** – 新增专用的耗材库存视图：
  - 可按品牌 / 类型 / 颜色搜索，并支持状态筛选（紧急 / 低 / 正常）
  - 可配置紧急和低库存阈值，支持行内库存编辑以及快速 +100g / −100g 按钮
  - “耗材库存告警”小部件现在直接基于这些阈值和实际库存水平工作
- 📊 **仪表盘改进** – 仪表盘视图中默认启用所有小部件：
  - Quick Actions, Recent Offers, Filament Stock Alerts, Financial Trends, Active Projects, Scheduled Tasks
  - 经典首页视图与小部件仪表盘现在共享更加一致的一组统计数据和图表
- 🧱 **报价界面体验改进** – 更流畅的编辑与多选：
  - 修复了部分编辑后报价未能立即在主列表中更新的问题
  - 多选复选框从标题文本中移出，客户名称不再被遮挡，始终清晰可见
- 🧭 **页眉与布局微调**：
  - 移除了页眉中的面包屑导航栏，使界面更简洁
  - 最小窗口大小（1280×720）现在在 Tauri 层面强制生效，同时避免引入水平滚动条

### v1.4.33 (2025) - 🔧 小部件布局和拖拽改进 + 教程演示数据

- 📊 **小部件布局修复** - 修复了小部件定位和拖拽功能:
  - 修复了6个小尺寸"S"小部件的自动定位，使其并排对齐
  - 小部件现在在手动拖放后保持其位置
  - 修复了布局持久性 - 小部件不再跳回其原始位置
  - 改进了拖拽手柄功能 - 可以从标题或拖拽手柄栏拖拽小部件
  - 修复了重新定位后小部件下方的空白空间问题
  - 增强了布局更改处理，以防止覆盖手动更改
- 🎓 **教程演示数据系统** - 自动演示数据生成和清理:
  - 教程开始时自动生成演示数据（如果没有现有数据）
  - 演示数据包括示例打印机、耗材、报价和客户
  - 教程完成或跳过时自动删除演示数据
  - 删除演示数据后应用程序自动重启以清除内存
  - 清理演示数据时保留设置（语言、教程状态）
  - 修复了无限循环问题 - 教程完成后不再重新启动
- 🔧 **主构建发布修复** - 改进了GitHub发布创建:
  - 在创建GitHub发布之前添加了发布文件验证
  - 改进了发布创建，确保正确显示最新版本
  - 修复了发布名称格式以保持一致性

### v1.3.12 (2025) - 🎨 小部件系统和货币增强

- 📊 **小部件系统改进** - 增强的小部件功能和本地化:
  - 新增小部件: 打印时间图表、客户统计图表、报价状态图表
  - 修复小部件导出功能 - 所有图表小部件现在可导出为SVG
  - 基于所选语言的动态小部件标题翻译
  - 本地化的导出文件名，使用OS兼容命名（下划线，无特殊字符）
  - 语言更改后立即更新小部件语言
  - 成功图表导出的Toast通知
  - 所有小部件元素和加载状态在所有14种语言中完全翻译
- 💱 **货币支持扩展** - 扩展的货币支持:
  - 添加的货币: GBP（英镑）、PLN（波兰兹罗提）、CZK（捷克克朗）、CNY（人民币）、UAH（乌克兰格里夫纳）、RUB（俄罗斯卢布）
  - 所有新货币的货币符号和标签
  - 在所有组件中正确转换和显示货币
  - 货币选择下拉菜单已更新所有支持的货币
- 💰 **成本计算精度修复** - 修复浮点精度问题:
  - 所有成本计算（耗材、电力、干燥、使用、总计）现在四舍五入到2位小数
  - 消除长小数显示（例如 `0.17500000000000002` → `0.18`）
  - 整个应用程序中一致的数字格式
- 🏢 **公司信息对话框** - 改进的公司信息管理:
  - 公司信息表单移至模态对话框（类似于商品/耗材）
  - "公司详情"按钮用于打开/编辑公司信息
  - 对话框可通过X按钮、背景点击或Escape键关闭
  - 更好的UX，带有动画模态过渡
  - 所有公司信息字段在组织的对话框界面中可访问

### v1.3.11 (2025) - 🎨 小部件仪表板改进

- 📊 **小部件仪表板改进** - 改进的小部件仪表板功能:
  - 修复了小部件容器的内边距和边距，以实现更好的边到边布局
  - 改进了滚动行为 - 当内容超过视口时，小部件现在可以正确滚动
  - 修复了窗口调整大小时小部件收缩的问题 - 小部件在所有断点上保持大小
  - 在所有屏幕尺寸上保持一致的12列布局
  - 更好的小部件定位和间距
- 🔧 **布局修复**:
  - 移除了阻止小部件到达应用程序边缘的固定容器内边距
  - 修复了 ResponsiveGridLayout 高度计算以实现正确的滚动
  - 改进了容器溢出处理
  - 更好的小部件组布局一致性

### v1.2.1 (2025) - 🎨 UI 一致性和列管理

- 📊 **耗材列管理** - 为耗材组件添加列可见性和排序:
  - 列可见性切换菜单 (与打印机组件相同)
  - 可排序列: 品牌, 类型, 重量, 价格/公斤
  - 列可见性首选项保存在设置中
  - 与打印机组件一致的 UI (管理按钮, 下拉菜单, 排序指示器)
- 🎨 **主题颜色一致性** - 改进了所有组件中主题颜色的使用:
  - 所有按钮和下拉菜单现在一致地使用主题颜色 (耗材, 打印机, 计算器, 价格趋势)
  - 移除了硬编码颜色 (灰色按钮替换为主题主色)
  - 标题组件完全适应所有主题和颜色
  - 状态信息卡片使用主题颜色而不是硬编码的 rgba 值
  - 使用 themeStyles.buttonHover 的一致悬停效果
- 🔧 **UI 改进**:
  - "管理列"按钮现在使用主题主色而不是辅助色
  - 价格趋势选择下拉菜单使用适当的焦点样式
  - 所有下拉菜单与主题颜色保持一致样式
  - 所有页面上的更好视觉一致性

### v1.1.6 (2025) - 🌍 完整翻译覆盖

- 🌍 **教程翻译** - 已将所有语言文件中缺失的教程翻译键添加:
  - 8 个新教程步骤已完全翻译 (状态仪表板, PDF 预览, 拖放, 右键菜单, 价格历史, 在线价格比较, 导出/导入, 备份/恢复)
  - 所有教程内容现在可在所有 14 种支持的语言中使用
  - 完整的教程体验，支持捷克语、西班牙语、法语、意大利语、波兰语、葡萄牙语、俄语、斯洛伐克语、乌克兰语和中文
- 🎨 **主题名称翻译** - 主题名称现在已完全翻译为所有语言:
  - 15 个主题名称已添加到所有语言文件 (浅色, 深色, 蓝色, 绿色, 森林, 紫色, 橙色, 粉彩, 炭黑, 午夜, 渐变, 霓虹, 赛博朋克, 日落, 海洋)
  - 主题名称从翻译系统动态加载，而不是硬编码值
  - 回退机制: 翻译键 → displayName → 主题名称
  - 所有主题现在在设置中以用户选择的语言显示

### v1.1.5 (2025) - 🎨 UI 改进和日志管理

- 🎨 **耗材添加对话框重新设计** - 改进的双列布局以更好地组织:
  - 左列: 基本数据 (品牌, 类型, 重量, 价格, 图片上传)
  - 右列: 颜色选择，包含所有颜色选项
  - 所有输入字段具有一致的宽度
  - 更好的视觉层次和间距
  - 图片上传移至左列价格字段下方
- 📋 **日志文件管理** - 数据管理设置中的新日志管理部分:
  - 可配置的自动删除旧日志文件 (5, 10, 15, 30, 60, 90 天或从不)
  - 在文件管理器中打开日志文件夹的按钮
  - 更改设置时自动清理
  - 特定于平台的文件夹打开 (macOS, Windows, Linux)
- 📦 **导出/导入布局** - 导出和导入部分现在并排:
  - 双列响应式布局
  - 更好的空间利用
  - 改进的视觉平衡
- 🍎 **macOS 通知警告** - 可关闭的警告对话框:
  - 仅在 macOS 平台上显示
  - 两种关闭选项: 临时 (X 按钮) 或永久 (关闭按钮)
  - 临时关闭: 仅对当前会话隐藏，重启后重新出现
  - 永久关闭: 保存到设置，不再出现
  - 关闭类型之间的清晰视觉区别

### v1.1.4 (2025) - 🐛 耗材库更新文件自动创建

- 🐛 **自动创建更新文件** - 修复了 `update_filamentLibrary.json` 未自动创建的问题:
  - 文件现在在首次启动时从 `filamentLibrarySample.json` 自动创建
  - 确保更新文件始终可用于合并
  - 仅在文件不存在时创建（不覆盖现有文件）
  - 改进了更新文件操作的错误处理和日志记录

### v1.1.3 (2025) - 🪟 Windows 兼容性修复

- 🪟 **Windows 兼容性修复** - 耗材库加载改进:
  - 大型 JSON 文件的动态导入（替代静态导入）
  - 缓存机制避免多次加载
  - 改进 Windows 上文件未找到情况的错误处理
  - 跨平台兼容性（Windows、macOS、Linux）
- 🔧 **错误处理改进** - 增强的错误消息:
  - 正确处理 Windows 特定的错误消息
  - 静默处理文件未找到情况（不作为警告）

### v1.1.2 (2025) - 🌍 语言选择器和改进

- 🌍 **首次启动时的语言选择器** - 首次启动时现代、动画的语言选择对话框:
  - 支持13种语言，带国旗图标
  - 主题感知设计
  - 流畅的动画
  - 教程以所选语言运行
- 🔄 **恢复出厂设置** - 完全删除数据功能:
  - 删除所有存储的数据（打印机、线材、报价、客户、设置）
  - 危险操作的确认对话框
  - 应用程序像首次启动一样重新启动
- 🎨 **UI改进**:
  - 页脚文本对比度修复（动态颜色选择）
  - 更改语言时立即保存
  - 改进的工具提示定位
- 📚 **教程翻译** - 所有支持语言的完整教程翻译（添加了俄语、乌克兰语、中文）

### v1.1.1 (2025) - 🎨 标题布局改进

- 📐 **标题重新排列** - 三部分标题结构:
  - 左侧: 菜单 + 徽标 + 标题
  - 中间: 面包屑（动态缩小）
  - 右侧: 快速操作 + 状态信息卡片
- 📊 **状态信息卡片** - 紧凑、现代的风格:
  - "下次保存"（标签和值）
  - 日期和时间（堆叠）
  - 始终位于右侧
- 📱 **响应式设计** - 改进的断点:
  - 隐藏面包屑 <1000px
  - 隐藏日期 <900px
  - 隐藏"下次保存" <800px
  - 紧凑的快速操作 <700px
- 🔢 **数字格式修复** - 加载进度百分比四舍五入

### v1.1.0 (2025) - 🚀 功能更新

- 🔍 **全局搜索扩展** - 增强的搜索功能:
  - 按客户名称、ID、状态和日期搜索报价
  - 从数据库 (filamentLibrary) 按品牌、类型和颜色搜索耗材
  - 从搜索结果一键将耗材添加到已保存列表
  - 改进的搜索结果，带类型指示器
- 💀 **骨架加载系统** - 壮观的加载体验:
  - 带闪烁效果的动画骨架组件
  - 带视觉指示器的进度跟踪
  - 已完成步骤带复选标记的加载步骤
  - 流畅的淡入过渡
  - 主题感知的骨架颜色
  - 页面特定的骨架加载器
- 🎨 **UI/UX 改进**:
  - 更好的加载状态
  - 数据加载期间改进的用户反馈
  - 增强的视觉体验

### v1.0.0 (2025) - 🎉 第一个稳定版本

- 🎨 **现代 UI 组件** - 使用现代组件完全重新设计 UI:
  - Empty State 组件提供更好的用户体验
  - Card 组件带悬停效果
  - Progress Bar 组件用于 PDF 导出/导入操作
  - Tooltip 组件带主题集成
  - Breadcrumb 导航用于清晰的页面层次结构
- ⚡ **快速操作** - 标题栏中的快速操作按钮，加快工作流程:
  - 用于灯丝、打印机和客户的快速添加按钮
  - 基于活动页面的动态按钮
  - 键盘快捷键集成
- 🔍 **全局搜索 (Command Palette)** - 强大的搜索功能:
  - `Ctrl/Cmd+K` 打开全局搜索
  - 搜索页面和快速操作
  - 键盘导航 (↑↓, Enter, Esc)
  - 主题感知样式
- ⏪ **撤销/重做功能** - 灯丝的历史管理:
  - `Ctrl/Cmd+Z` 撤销
  - `Ctrl/Cmd+Shift+Z` 重做
  - UI 中的可视化撤销/重做按钮
  - 50 步历史支持
- ⭐ **收藏灯丝** - 标记和过滤收藏的灯丝:
  - 星形图标切换收藏状态
  - 过滤器仅显示收藏
  - 持久收藏状态
- 📦 **批量操作** - 高效的批量管理:
  - 多个灯丝的复选框选择
  - 全选 / 取消全选功能
  - 带确认对话框的批量删除
  - 可视化选择指示器
- 🎨 **模态对话框** - 现代模态体验:
  - 添加/编辑表单的模糊背景模态
  - 固定大小的输入字段
  - Escape 键关闭
  - 使用 framer-motion 的流畅动画
- ⌨️ **键盘快捷键** - 增强的快捷键系统:
  - 可自定义的键盘快捷键
  - 快捷键帮助对话框 (`Ctrl/Cmd+?`)
  - 使用按键捕获编辑快捷键
  - 持久快捷键存储
- 📝 **日志系统** - 全面的日志记录:
  - 前端和后端的单独日志文件
  - 平台无关的日志目录解析
  - 自动日志轮换
  - 控制台集成
- 🔔 **通知改进** - 更好的通知系统:
  - 报价删除通知中的客户名称
  - 跨平台通知支持
  - 改进的错误处理
- 🎯 **UI/UX 改进**:
  - 固定输入字段大小
  - 更好的表单布局
  - 改进的主题集成
  - 增强的可访问性

### v0.6.0 (2025)

#### 🐛 错误修复
- **日志优化**: 减少过度和重复的日志记录
  - 信息日志仅在开发模式 (DEV) 下显示
  - 错误仍会在生产构建中记录
  - FilamentLibrary 初始化静默进行
- **修复虚假警告**: 线材颜色解析仅在库已加载且仍未找到颜色时发出警告
  - 防止在异步库加载期间出现虚假警告
  - 警告仅针对真正的问题出现
- **更新检查器重复修复**: 删除重复的更新检查调用
- **键盘快捷键日志修复**: 仅在存在快捷键时记录，跳过无效组合

#### ⚡ 性能改进
- 存储操作日志优化（仅 DEV 模式）
- 生产构建中更少的控制台操作
- 开发期间更干净的控制台输出

## 📸 截图

应用程序包括:
- 带统计信息的主页仪表板
- 耗材管理
- 打印机管理
- 成本计算计算器
- 报价列表和详细视图
- 状态仪表板和时间线
- PDF 导出和内置预览

## 🚀 安装

### 先决条件

- **Rust**: [安装 Rust](https://rustup.rs/)
- **Node.js**: [安装 Node.js](https://nodejs.org/) (版本 20+)
- **pnpm**: `npm install -g pnpm`
- **Tauri CLI**: `cargo install tauri-cli`

### macOS 特定

```bash
# Xcode Command Line Tools
xcode-select --install
```

### Linux 特定 (Ubuntu/Debian)

```bash
sudo apt update
sudo apt install libwebkit2gtk-4.1-dev \
    build-essential \
    curl \
    wget \
    file \
    libssl-dev \
    libgtk-3-dev \
    libayatana-appindicator3-dev \
    librsvg2-dev
```

### Windows 特定

- Visual Studio Build Tools (C++ 构建工具)
- Windows SDK

## 📦 构建

### 开发模式运行

```bash
cd src-tauri
cargo tauri dev
```

### 生产构建（创建独立应用程序）

```bash
cd src-tauri
cargo tauri build
```

独立应用程序将位于:
- **macOS**: `src-tauri/target/release/bundle/macos/3DPrinterCalcApp.app`
- **Linux**: `src-tauri/target/release/bundle/deb/` 或 `appimage/`
- **Windows**: `src-tauri/target/release/bundle/msi/`

### Beta 构建

项目包含一个配置用于单独构建的 `beta` 分支:

```bash
# 切换到 beta 分支
git checkout beta

# 本地 beta 构建
./build-frontend.sh
cd src-tauri
cargo tauri build
```

Beta 构建自动设置 `VITE_IS_BETA=true` 变量，因此菜单中会出现 "BETA"。

**GitHub Actions**: 推送到 `beta` 分支时，`.github/workflows/build-beta.yml` 工作流自动运行，为所有三个平台构建 beta 版本。

详细指南: [BUILD.md](BUILD.md) 和 [HOW_TO_BUILD_APP.md](HOW_TO_BUILD_APP.md)

## 💻 开发

### 项目结构

```
3DPrinterCalcApp/
├── frontend/          # React + TypeScript 前端
│   ├── src/
│   │   ├── components/    # React 组件
│   │   ├── utils/        # 辅助函数
│   │   └── types.ts      # TypeScript 类型
│   └── package.json
├── src-tauri/         # Rust 后端
│   ├── src/           # Rust 源代码
│   ├── Cargo.toml     # Rust 依赖项
│   └── tauri.conf.json # Tauri 配置
└── README.md
```

### 前端开发

```bash
cd frontend
pnpm install
pnpm dev
```

### 依赖项

**前端:**
- React 19
- TypeScript
- Vite

**后端:**
- Tauri v2
- tauri-plugin-store (数据存储)
- tauri-plugin-log (日志记录)

## 📖 使用

1. **添加打印机**: 打印机菜单 → 添加新打印机
2. **添加耗材**: 耗材菜单 → 添加新耗材
3. **计算成本**: 计算器菜单 → 选择打印机和耗材
4. **保存报价**: 在计算器中点击"保存为报价"按钮
5. **PDF 导出**: 报价菜单 → 选择报价 → PDF 导出
6. **检查 Beta 版本**: 设置菜单 → 启用"检查 Beta 更新"选项

## 🔄 版本管理和更新

应用程序自动检查 GitHub Releases 以获取新版本:

- **启动时**: 自动检查更新
- **每 5 分钟**: 自动重新检查
- **通知**: 如果有新版本可用，右上角会出现通知

### Beta 版本检查

要检查 Beta 版本:

1. 转到 **设置** 菜单
2. 启用 **"检查 Beta 更新"** 选项
3. 应用程序立即检查 Beta 版本
4. 如果有更新的 Beta 版本可用，会出现通知
5. 点击"下载"按钮转到 GitHub Release 页面

**示例**: 如果您使用 RELEASE 版本（例如 0.1.0）并启用 Beta 检查，应用程序会找到最新的 Beta 版本（例如 0.2.0-beta），如果有更新的版本会通知您。

详细指南: [VERSIONING.md](VERSIONING.md)

## 🛠️ 技术栈

- **前端**: React 19、TypeScript、Vite
- **后端**: Rust、Tauri v2
- **数据存储**: Tauri Store Plugin (JSON 文件)
- **样式**: 内联样式 (commonStyles)
- **i18n**: 自定义翻译系统
- **CI/CD**: GitHub Actions (自动构建 macOS、Linux、Windows)
- **版本管理**: GitHub Releases API 集成

## 📝 许可证

此项目在 **MIT 许可证**下授权，但 **商业使用需要许可**。

应用程序的完整版权: **Lekszikov Miklós (LexyGuru)**

- ✅ **个人和教育用途**: 允许
- ❌ **商业用途**: 仅需明确的书面许可

详细信息: [LICENSE](LICENSE) 文件

## 👤 作者

Lekszikov Miklós (LexyGuru)

## 🙏 致谢

- [Tauri](https://tauri.app/) - 跨平台桌面应用程序框架
- [React](https://react.dev/) - 前端框架
- [Vite](https://vitejs.dev/) - 构建工具

## 📚 其他文档

- [BUILD.md](BUILD.md) - 所有平台的详细构建指南
- [HOW_TO_BUILD_APP.md](HOW_TO_BUILD_APP.md) - 创建独立应用程序
- [VERSIONING.md](VERSIONING.md) - 版本管理和更新
- [CREATE_FIRST_RELEASE.md](CREATE_FIRST_RELEASE.md) - 创建第一个 GitHub Release

## 🌿 分支结构

- **`main`**: 稳定发布版本 (RELEASE 构建)
- **`beta`**: Beta 版本和开发 (BETA 构建)

推送到 `beta` 分支时，GitHub Actions 工作流自动运行，构建 Beta 版本。

## 📋 版本历史

### v1.1.1 (2025) - 🎨 标题布局改进

- 🎨 **标题重新设计** - 完整的标题布局修订:
  - 三部分结构（左侧：徽标/菜单，中心：面包屑，右侧：操作/状态）
  - 状态信息卡片始终定位在最右侧
  - 状态信息的现代卡片式设计
  - 整个标题中更好的间距和对齐
- 📱 **响应式设计** - 在移动设备和小屏幕上的更好体验:
  - 元素可见性的动态断点
  - 面包屑截断修复
  - 快速操作适应屏幕大小
  - 状态信息卡片的响应式大小调整
- 🔧 **布局修复**:
  - 修复了面包屑溢出和截断问题
  - 状态信息卡片定位改进
  - 更好的 flexbox 布局管理
  - 元素之间的间距和间隙改进

### v1.1.0 (2025) - 🚀 功能更新

- 🔍 **全局搜索扩展** - 增强的搜索功能
- 💀 **骨架加载系统** - 壮观的加载体验
- 🎨 **UI/UX 改进** - 更好的加载状态和视觉体验

### v1.0.0 (2025) - 🎉 第一个稳定版本

- 🎨 **现代 UI 组件** - 使用现代组件完全重新设计 UI
- ⚡ **快速操作** - 标题栏快速操作按钮
- 🔍 **全局搜索** - 强大的搜索功能
- ⏪ **撤销/重做功能** - 历史管理
- ⭐ **收藏耗材** - 标记和筛选收藏的耗材
- 📦 **批量操作** - 高效的批量管理
- 🎨 **模态对话框** - 现代模态体验
- ⌨️ **键盘快捷键** - 增强的快捷键系统
- 📝 **日志系统** - 全面的日志记录
- 🔔 **通知改进** - 更好的通知系统

### v0.6.0 (2025)

- 👥 **客户数据库** - 完整的客户管理系统，包括：
  - 添加、编辑、删除客户
  - 联系信息（电子邮件、电话）
  - 公司详情（可选）
  - 地址和备注
  - 客户统计（总报价数、最后报价日期）
  - 搜索功能
  - 与计算器集成，用于快速选择客户
- 📊 **价格历史和趋势** - 跟踪耗材价格变化：
  - 更新耗材价格时自动跟踪价格历史
  - 使用SVG图表可视化价格趋势
  - 价格统计（当前、平均、最低、最高价格）
  - 趋势分析（上涨、下跌、稳定）
  - 价格历史表，包含详细的变更信息
  - 重大价格变化警告（10%+变化）
  - 在编辑期间在耗材组件中显示价格历史
- 🔧 **改进**：
  - 增强的计算器，带客户选择下拉菜单
  - 在耗材编辑表单中集成价格历史
  - 改进的客户和价格历史数据持久性

### v0.5.58 (2025)
- 🌍 **乌克兰语和俄语支持** – 添加了乌克兰语（uk）和俄语（ru）的完整翻译支持：
  - 两种语言的完整翻译文件，包含所有 813 个翻译键
  - 乌克兰语区域设置支持（uk-UA）用于日期/时间格式化
  - 俄语区域设置支持（ru-RU）用于日期/时间格式化
  - 所有 README 文件已更新，语言菜单中包含新语言
  - 语言数量从 12 种更新为 14 种
  - 创建了 README.uk.md 和 README.ru.md 文档文件

### v0.5.57 (2025)
- 🍎 **Platform-Specific Features** – Native platform integration for macOS, Windows, and Linux:
  - **macOS**: Dock badge support (numeric/textual badge on app icon), native Notification Center integration with permission management
  - **Windows**: Native Windows notifications
  - **Linux**: System tray integration, desktop notifications support
  - **All Platforms**: Native notification API integration with permission request system, platform detection and automatic feature enabling
- 🔔 **Notification System** – Native notification support with permission management:
  - Permission request system for macOS notifications
  - Notification test buttons in Settings
  - Automatic permission checking and status display
  - Platform-specific notification handling (macOS Notification Center, Windows Action Center, Linux desktop notifications)

### v0.5.56 (2025)
- 🌍 **完整语言翻译** – 完成了 6 个剩余语言文件的完整翻译：捷克语 (cs)、西班牙语 (es)、意大利语 (it)、波兰语 (pl)、葡萄牙语 (pt) 和斯洛伐克语 (sk)。每个文件包含所有 813 个翻译键，因此应用程序现在完全支持这些语言。
- 🔒 **Tauri 权限修复** – `update_filamentLibrary.json` 文件现在在 Tauri 功能文件中明确启用读取、写入和创建操作，确保耗材库更新可靠工作。

### v0.5.55 (2025)
- 🧵 **报价编辑增强** – 保存的报价现在允许直接选择或修改打印机，成本随耗材更改自动重新计算。
- 🧮 **准确性和日志记录** – 详细日志记录有助于跟踪成本计算步骤（耗材、电力、干燥、使用），使查找导入的 G-code 文件中的错误更容易。
- 🌍 **翻译补充** – 为打印机选择器添加了新的 i18n 键和标签，确保在所有支持的语言中编辑器 UI 一致。
- 📄 **文档更新** – README 扩展了新功能描述，v0.5.55 版本添加到版本历史中。

### v0.5.11 (2025)
- 🗂️ **语言模块化** – 将应用程序扩展为在新的 `languages/` 目录中组织的翻译文件，使添加新语言和管理现有文本更容易。
- 🌍 **统一的 UI 翻译** – 切片器导入界面现在从中央翻译系统工作，所有按钮、错误消息和摘要都已本地化。
- 🔁 **语言选择器更新** – 在设置中，语言选择器基于发现的语言文件加载，因此将来只需添加新的语言文件。
- 🌐 **新语言基础** – 为法语、意大利语、西班牙语、波兰语、捷克语、斯洛伐克语、巴西葡萄牙语和简体中文准备了翻译文件（带英语回退），实际翻译可以轻松填写。

### v0.5.0 (2025)
- 🔎 **耗材价格比较按钮** – 每个自定义耗材现在都有一个放大镜图标，根据品牌/类型/颜色打开 Google/Bing 搜索，提供指向当前价格的快速链接。
- 💶 **小数价格支持** – 耗材价格字段现在接受小数（14.11 € 等），输入在保存时自动验证和格式化。
- 🌐 **反向搜索回退** – 如果 Tauri shell 无法打开浏览器，应用程序会自动打开新标签页，因此搜索在所有平台上都有效。

### v0.4.99 (2025)
- 🧾 **计算器中内置 G-code 导入** – 计算器顶部的新模态 `SlicerImportModal`，一键加载 G-code/JSON 导出，传输打印时间、耗材数量并创建报价草稿。
- 📊 **来自标头的切片器数据** – G-code 标头 `total filament weight/length/volume` 值自动接管摘要，准确处理颜色更改损失。

### v0.4.98 (2025)
- 🧵 **多色耗材支持** – 耗材库和管理 UI 现在单独标记多色（彩虹/双色/三色）耗材，带有注释和彩虹预览。
- 🌐 **CSV 导入时自动翻译** – 从外部数据库导入的颜色名称接收匈牙利语和德语标签，保持颜色选择器多语言而无需手动编辑。
- 🔄 **更新库合并** – `update_filamentLibrary.json` 文件内容在启动时自动去重并与现有库合并，不会覆盖用户修改。
- 📁 **CSV 转换器更新** – `convert-filament-csv.mjs` 脚本不再覆盖持久的 `filamentLibrary.json`，而是创建更新文件并生成多语言标签。
- ✨ **动画体验调整** – 新的页面过渡选项（翻转、视差）、微交互样式选择器、脉冲反馈、耗材库骨架列表和精细调整的卡片悬停效果。
- 🎨 **主题工作坊扩展** – 四个新的内置主题（Forest、Pastel、Charcoal、Midnight），即时复制活动主题以进行自定义编辑，改进的渐变/对比度处理和简化的共享过程。

### v0.4.0 (2025)
- 🧵 **耗材数据库集成** – 来自内置 JSON 库的 12,000+ 工厂颜色（filamentcolors.xyz 快照），按品牌和材料组织
- 🪟 **固定大小选择器面板** – 按钮打开的、可搜索的、可滚动的品牌和类型列表，相互排斥，使表单更加透明
- 🎯 **颜色选择器改进** – 识别库项目时，自动设置表面处理和十六进制代码，切换到自定义模式时提供单独字段
- 💾 **耗材库编辑器** – 带弹出表单的新设置选项卡、重复处理和基于 Tauri FS 的持久 `filamentLibrary.json` 保存
- 📄 **文档更新** – 主功能列表中为耗材颜色库添加新项目，清理 README/FEATURE_SUGGESTIONS

### v0.3.9 (2025)
- 🔍 **报价过滤器预设** – 可保存、可命名的过滤器设置，默认快速预设（今天、昨天、每周、每月等）和一键应用/删除
- 📝 **状态更改注释** – 用于报价状态修改的新模态，带有存储在状态历史中的可选注释
- 🖼️ **PDF 导出扩展** – 与耗材一起存储的图像出现在 PDF 表格中，采用打印优化样式
- 🧾 **公司品牌数据表** – 公司名称、地址、税号、银行账户、联系方式和徽标上传；自动包含在 PDF 标头中
- 🎨 **PDF 模板选择器** – 三种样式（现代、简约、专业）可供选择报价外观
- 👁️ **内置 PDF 预览** – 报价详情处的单独按钮，用于导出前的即时视觉检查
- 📊 **状态仪表板** – 带摘要的状态卡片、快速状态过滤器和报价中最近状态更改的时间线
- 📈 **统计图表** – 收入/成本/利润趋势图、耗材分布饼图、每台打印机收入条形图，全部可导出为 SVG/PNG 格式，也可以保存为 PDF

### v0.3.8 (2025)
- 🐛 **报告数字格式修复** - 报告格式化为 2 位小数：
  - 主要统计卡片（收入、支出、利润、报价）：`formatNumber(formatCurrency(...), 2)`
  - 图表上方的值：`formatNumber(formatCurrency(...), 2)`
  - 详细统计（平均利润/报价）：`formatNumber(formatCurrency(...), 2)`
  - 现在与主页一致（例如 `6.45` 而不是 `6.45037688333333`）
- 🎨 **设置选项卡导航修复** - 背景和文本颜色改进：
  - 选项卡导航部分背景：`rgba(255, 255, 255, 0.85)` 用于渐变主题 + `blur(10px)`
  - 选项卡按钮背景：活动 `rgba(255, 255, 255, 0.9)`，非活动 `rgba(255, 255, 255, 0.7)` 用于渐变主题
  - 选项卡按钮文本颜色：`#1a202c`（深色）用于渐变主题以提高可读性
  - 悬停效果：`rgba(255, 255, 255, 0.85)` 用于渐变主题
  - 背景滤镜：`blur(8px)` 用于选项卡按钮，`blur(10px)` 用于导航部分

### v0.3.7 (2025)
- 🎨 **设计现代化** - 使用动画和新主题的完整视觉转换：
  - 新主题：Gradient、Neon、Cyberpunk、Sunset、Ocean（5 个新的现代主题）
  - 集成 Framer Motion 动画（fadeIn、slideIn、stagger、悬停效果）
  - 渐变主题的玻璃态效果（模糊 + 透明背景）
  - 霓虹/赛博朋克主题的霓虹发光效果
  - 现代化的卡片和表面（更大的内边距、圆角、更好的阴影）
- 🎨 **颜色改进** - 所有主题的更好对比度和可读性：
  - 渐变主题在白色/浅色背景上的深色文本 (#1a202c)
  - 所有组件中改进了输入字段、标签、h3 着色
  - 所有页面上一致的颜色处理（Filaments、Printers、Calculator、Offers、Settings、Console）
  - 为渐变主题添加文本阴影以提高可读性
- 📊 **表格样式改进** - 更模糊的背景和更好的文本对比度：
  - 背景颜色：rgba(255, 255, 255, 0.85) 用于渐变主题（之前为 0.95）
  - 背景滤镜：blur(8px) 以获得更模糊的效果
  - 文本颜色：#333（深灰色）用于渐变主题以提高可读性
  - 单元格背景：rgba(255, 255, 255, 0.7) 以获得更模糊的效果
- 🎨 **卡片背景颜色改进** - 更模糊的背景，更好的可读性：
  - 背景颜色：rgba(255, 255, 255, 0.75) 用于渐变主题（之前为 0.95）
  - 背景滤镜：blur(12px) 以获得更强的模糊
  - 不透明度：0.85 用于哑光效果
  - 文本颜色：#1a202c（深色）用于渐变主题
- 📈 **主页现代化** - 每周/每月/每年统计和期间比较：
  - 期间比较卡片（每周、每月、每年）带彩色强调条
  - 现代化的 StatCard 组件（带彩色背景的图标、强调条）
  - 摘要部分在带图标的卡片中组织
  - 添加了期间比较部分
- 🐛 **日期过滤器修复** - 更准确的期间过滤：
  - 时间重置（00:00:00）以进行准确比较
  - 设置上限（今天包括在内）
  - 每周：最近 7 天（包括今天）
  - 每月：最近 30 天（包括今天）
  - 每年：最近 365 天（包括今天）
- 🎨 **侧边栏现代化** - 图标、玻璃态、霓虹发光效果
- 🎨 **ConfirmDialog 现代化** - 添加主题属性，协调着色

### v0.3.6 (2025)
- 🎨 **设置 UI 重组** - 选项卡系统（常规、外观、高级、数据管理）以获得更好的 UX 和更清晰的导航
- 🌐 **翻译改进** - 所有组件中所有硬编码的匈牙利语文本已翻译（HU/EN/DE）：
  - Calculator："3D 打印成本计算"
  - Filaments："管理和编辑耗材"
  - Printers："管理打印机和 AMS 系统"
  - Offers："管理和导出保存的报价"
  - Home：统计标题、摘要、CSV 导出标签（小时/Std/hrs，件/Stk/pcs）
  - VersionHistory："没有可用的版本历史"
- 💾 **版本历史缓存系统** - 物理保存到 localStorage，每 1 小时检查 GitHub：
  - 基于校验和的更改检测（仅在新版本时下载）
  - 每种语言的单独缓存（匈牙利语/英语/德语）
  - 从缓存快速切换语言（无需重新翻译）
  - 新版本时自动缓存失效
- 🌐 **智能翻译** - 仅翻译新版本，使用缓存中的旧翻译：
  - 缓存验证（如果相同文本则不缓存）
  - 如果翻译失败，MyMemory API 回退
  - 错误计数器自动重置（5 分钟后重置）
  - MAX_CONSECUTIVE_ERRORS: 10, MAX_RETRIES: 2
- 🔧 **LibreTranslate 已删除** - 仅使用 MyMemory API（消除了 400 错误，GET 请求，无 CORS）
- 🔄 **重试按钮重构** - 使用 useEffect 的更简单的触发机制
- 🐛 **构建错误修复** - 修复了 JSX 缩进问题（Settings.tsx 导出/导入部分）

### v0.3.5 (2025)
- ✅ **MyMemory API 集成** - 免费翻译 API 而不是 LibreTranslate
- ✅ **GitHub 发布页面打开** - 在速率限制时打开 GitHub 发布页面的按钮
- ✅ **速率限制错误处理改进** - 清晰的错误消息和重试按钮
- 🐛 **构建错误修复** - 删除了未使用的导入（offerCalc.ts）

### v0.3.4 (2025)
- ✅ **输入验证增强** - 创建中央验证实用程序并集成到 Calculator、Filaments、Printers 组件中
- ✅ **验证错误消息** - 多语言（HU/EN/DE）错误消息，带 toast 通知
- ✅ **性能优化** - 延迟加载组件（代码拆分）、useMemo 和 useCallback 优化
- ✅ **平台特定初始化** - macOS、Windows、Linux 平台特定初始化基础
- 🐛 **构建错误修复** - 添加了 Printers.tsx 上下文菜单函数

### v0.3.3 (2025)
- 🖱️ **拖放功能** - 通过拖拽重新排序报价、耗材和打印机
- 📱 **上下文菜单** - 右键菜单用于快速操作（编辑、删除、复制、导出 PDF）
- 🎨 **视觉反馈** - 拖放期间不透明度和光标变化
- 🔔 **Toast 通知** - 重新排序后的通知
- 🐛 **构建错误修复** - Calculator.tsx theme.colors.error -> theme.colors.danger 修复

### v0.3.2 (2025)
- 📋 **模板功能** - 在 Calculator 组件中保存和加载计算作为模板
- 📜 **报价的历史/版本控制** – 报价版本控制、查看历史、跟踪更改
- 🧹 **重复修复** – 从 Filaments 和 Printers 组件中删除了重复的 CSV/JSON 导出/导入函数（保留在 Settings 中）

### v0.3.1 (2025)
- ✅ **输入验证增强** – 禁用负数，设置最大值（耗材重量、打印时间、功率等）
- 📊 **CSV/JSON 导出/导入** – 以 CSV 和 JSON 格式批量导出/导入耗材和打印机
- 📥 **导入/导出按钮** – 在 Filaments 和 Printers 页面上轻松访问导出/导入功能
- 🎨 **空状态改进** – 当没有数据时显示信息性空状态

### v0.3.0 (2025)
- ✏️ **报价编辑** – 编辑保存的报价（客户名称、联系方式、描述、利润率、耗材）
- ✏️ **在报价中编辑耗材** – 在报价中修改、添加、删除耗材
- ✏️ **编辑按钮** – 报价列表中删除按钮旁边的新编辑按钮
- 📊 **统计导出功能** – 从主页以 JSON 或 CSV 格式导出统计信息
- 📈 **报告生成** – 生成每周/每月/每年/全部报告，JSON 格式，带期间过滤
- 📋 **版本历史显示** – 在设置中查看版本历史，GitHub Releases API 集成
- 🌐 **GitHub 发布翻译** – 自动翻译匈牙利语 -> 英语/德语（MyMemory API）
- 💾 **翻译缓存** – localStorage 缓存用于翻译的发布说明
- 🔄 **动态版本历史** – Beta 和发布版本分别显示
- 🐛 **错误修复** – 删除了未使用的变量、代码清理、修复了 linter 错误

### v0.2.55 (2025)
- 🖥️ **控制台/日志功能** – 用于调试和查看日志的新控制台菜单项
- 🖥️ **控制台设置** – 可以在设置中启用控制台菜单项显示
- 📊 **日志收集** – 自动记录所有 console.log、console.error、console.warn 消息
- 📊 **全局错误记录** – 自动记录窗口错误和未处理的 Promise 拒绝事件
- 🔍 **日志过滤** – 按级别过滤（all、error、warn、info、log、debug）
- 🔍 **日志导出** – 以 JSON 格式导出日志
- 🧹 **日志删除** – 一键删除日志
- 📜 **自动滚动** – 自动滚动到新日志
- 💾 **完整日志记录** – 记录所有关键操作（保存、导出、导入、删除、导出 PDF、下载更新）
- 🔄 **更新按钮修复** – 下载按钮现在使用 Tauri shell 插件，可靠工作
- 🔄 **更新日志记录** – 更新检查和下载的完整日志记录
- ⌨️ **键盘快捷键** – `Ctrl/Cmd+N`（新建）、`Ctrl/Cmd+S`（保存）、`Escape`（取消）、`Ctrl/Cmd+?`（帮助）
- ⌨️ **键盘快捷键 macOS 修复** – Cmd vs Ctrl 处理，捕获阶段事件处理
- ⏳ **加载状态** – LoadingSpinner 组件用于加载状态
- 💾 **备份和恢复** – 使用 Tauri 对话框和 fs 插件完整备份和恢复数据
- 🛡️ **错误边界** – React ErrorBoundary 用于应用程序级错误处理
- 💾 **自动保存** – 带时间限制的自动保存，可配置间隔（默认 30 秒）
- 🔔 **通知设置** – Toast 通知开/关和持续时间设置
- ⌨️ **快捷键帮助菜单** – 模态窗口中的键盘快捷键列表（`Ctrl/Cmd+?`）
- 🎬 **动画和过渡** – 平滑过渡和关键帧动画（fadeIn、slideIn、scaleIn、pulse）
- 💬 **工具提示** – 悬停时所有重要元素的上下文帮助
- 🐛 **React 渲染错误修复** – 控制台记录器异步操作，使其不会阻塞渲染
- 🔧 **num-bigint-dig 更新** – 更新到 v0.9.1（修复弃用警告）

### v0.2.0 (2025)
- 🎨 **主题系统** – 6 个现代主题（浅色、深色、蓝色、绿色、紫色、橙色）
- 🎨 **主题选择器** – 在设置中可选择主题，立即生效
- 🎨 **完整主题集成** – 所有组件（Filaments、Printers、Calculator、Offers、Home、Settings、Sidebar）使用主题
- 🎨 **动态颜色** – 所有硬编码颜色替换为主题颜色
- 🎨 **响应式主题** – 报价和 Sidebar 页脚也使用主题
- 💱 **动态货币转换** – 报价现在以当前设置货币显示（自动转换）
- 💱 **货币更改** – 在设置中更改的货币立即影响报价显示
- 💱 **PDF 货币转换** – PDF 导出也以当前设置货币创建
- 💱 **耗材价格转换** – 耗材价格也自动转换

### v0.1.85 (2025)
- 🎨 **UI/UX 改进**：
  - ✏️ 删除了重复图标（编辑、保存、取消按钮）
  - 📐 导出/导入部分采用 2 列布局（并排）
  - 💾 使用本机保存对话框保存 PDF（Tauri 对话框）
  - 📊 PDF 保存的 Toast 通知（成功/错误）
  - 🖼️ 应用程序窗口大小：1280x720（之前为 1000x700）
- 🐛 **错误修复**：
  - 在 PDF 生成中添加了缺失信息（customerContact、单独行的利润、收入）
  - 添加了翻译键（calculator.profit、calculator.revenue、calculator.totalPrice、offers.customerContact、common.close）
- 📄 **PDF 导出改进**：
  - 在 PDF 中显示客户联系方式（电子邮件/电话）
  - 单独行的利润计算，带利润率
  - 单独行的收入（总价），突出显示
  - PDF 中的完整成本明细

### v0.1.56 (2025)
- ✨ **计算器布局改进**：修复了耗材卡片溢出，响应式 flexbox 布局
- ✨ **成本明细响应式**：现在动态响应窗口大小变化
- 🐛 **错误修复**：添加耗材时内容不会溢出窗口
- 🐛 **错误修复**：所有 Calculator 元素正确响应窗口大小变化

### v0.1.55 (2025)
- ✨ **确认对话框**：删除前请求确认（耗材、打印机、报价）
- ✨ **Toast 通知**：成功操作后的通知（添加、更新、删除）
- ✨ **输入验证**：禁用负数，设置最大值
- ✨ **加载状态**：应用程序启动时的加载微调器
- ✨ **错误边界**：应用程序级错误处理
- ✨ **搜索和过滤**：搜索耗材、打印机和报价
- ✨ **复制**：轻松复制报价
- ✨ **可折叠表单**：添加耗材和打印机的表单可折叠
- ✨ **报价扩展**：添加了客户名称、联系方式和描述字段
- 🐛 **Console.log 清理**：生产构建中没有 console.logs
- 🐛 **描述字段修复**：长文本正确换行。

---

**版本**: 1.6.0

如果您有任何问题或发现错误，请在 GitHub 存储库中打开一个问题！

